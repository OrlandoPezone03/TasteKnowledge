<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Recipe</title>
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" href="/assets/logo.svg">
    <link rel="stylesheet" href="/pages/css/navBar.css">
    <link rel="stylesheet" href="/pages/css/addRecipe.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
</head>

<body>
    <!-- Header con logo e navbar -->
    <header class="site-header">
      <div class="header-content">
        <div class="logo">
            <img src="/assets/logo.svg" alt="Taste Knowledge">
        </div>
        <div id="navbar-container" aria-hidden="true"></div>
      </div>
    </header>

    <div class="container">
        <div class="page-header">
            <h1 class="page-title">New Recipe</h1>
            <div class="step-indicator" id="stepIndicator">
            <span class="step-number active">1</span>
            <span class="step-divider"></span>
            <span class="step-number">2</span>
            </div>
        </div>

        <div class="content step-content" id="step1">
            <div class="content-wrapper">
            <div class="left-panel">
                <div class="photo-upload-section">
                <label class="section-label">Cover Photo</label>
                <div class="photo-upload">
                    <div class="photo-placeholder">
                    <div class="icon-bg">
                        <i class="bi bi-camera"></i>
                    </div>
                    <div class="upload-text">Upload Cover</div>
                    </div>
                </div>
                </div>

                <div class="form-group">
                <div class="slider-header">
                    <label>Cooking Duration</label>
                    <span class="current-value" id="sliderValue">30 min</span>
                </div>

                <div class="slider-container">
                    <input type="range" min="1" max="61" value="30" class="modern-slider" id="durationSlider">
                    <div class="slider-labels">
                    <span>1</span>
                    <span>30</span>
                    <span>>60</span>
                    </div>
                </div>
                </div>
            </div>

            <div class="right-panel">
                <div class="form-group">
                <label>Recipe Name</label>
                <input type="text" placeholder="Enter recipe name...">
                </div>

                <div class="form-group">
                <label>Description</label>
                <textarea class="auto-grow" placeholder="Write a short description of this dish..." rows="4"></textarea>
                </div>
            </div>
            </div>
            <div id="action-container">
            <button class="btn-primary" id="nextBtn">
                Next Step
                <i class="bi bi-arrow-right"></i>
            </button>
            </div>
        </div>

        <div class="content step-content hidden" id="step2">
            <div class="content-wrapper">
            <div class="left-panel">
                <div class="form-group">
                <div class="section-header">
                    <label>Ingredients</label>
                </div>

                <div id="ingredientsList">
                    <div class="ingredient-row">
                    <button type="button" class="btn-delete" title="Remove ingredient">
                        <i class="bi bi-trash"></i>
                    </button>
                    <input type="text" class="ing-name-input" placeholder="Ingredient">
                    <input type="text" class="ing-qty-input" placeholder="Quantity">
                    </div>
                </div>

                <button class="btn-outline" id="addIngredientBtn">
                    <span class="plus-icon">+</span>
                    Add Item
                </button>
                </div>

                <div class="form-group">
                <div class="slider-header">
                    <label>Difficulty</label>
                    <span class="current-value" id="difficultyValue">3 (Medium)</span>
                </div>

                <div class="slider-container">
                    <input type="range" min="1" max="5" value="3" class="modern-slider" id="difficultySlider">
                    <div class="slider-labels">
                    <span>1 (Easy)</span>
                    <span>3 (Medium)</span>
                    <span>5 (Hard)</span>
                    </div>
                </div>
                </div>

                <div class="form-group">
                <label>Category</label>
                <div id="categoryTagsContainer" class="category-tags-container"></div>
                </div>
            </div>

            <div class="right-panel">
                <div class="form-group">
                <label>Preparation Steps</label>

                <div id="stepsList">
                    <div class="step-card">
                    <button type="button" class="btn-delete-step" title="Remove step">
                        <i class="bi bi-trash"></i>
                    </button>

                    <div class="step-card-header">
                        <div class="step-number-badge">1</div>
                        <textarea class="auto-grow" placeholder="Describe this step..." rows="2"></textarea>
                    </div>

                    <div class="step-card-footer">
                        <button class="btn-photo-small">
                        <i class="bi bi-camera"></i>
                        Add Photo for Step 1
                        </button>
                    </div>
                    </div>
                </div>

                <button class="btn-dashed" id="addStepBtn">
                    <span class="plus-icon">+</span>
                    Add Next Step
                </button>
                </div>
            </div>
            </div>
            <div id="action-container">
            <button class="btn-primary" id="backBtn">
                <i class="bi bi-arrow-left"></i>
                Back
            </button>
            <button class="btn-primary" id="nextBtn">
                Next Step
                <i class="bi bi-arrow-right"></i>
            </button>
            </div>
        </div>

        <!-- URL Modal for Cover Photo -->
        <div class="modal-overlay hidden" id="urlModal">
            <div class="modal">
            <h2>Add Cover Photo URL</h2>
            <div class="form-group">
                <input type="text" id="coverPhotoUrl" placeholder="Paste image URL here...">
            </div>
            <div style="display: flex; gap: 12px">
                <button class="btn-secondary" id="cancelUrlBtn" style="flex: 1">
                Cancel
                </button>
                <button class="btn-primary" id="confirmUrlBtn" style="flex: 1">
                Confirm
                </button>
            </div>
            </div>
        </div>

        <!-- URL Modal for Step Photos -->
        <div class="modal-overlay hidden" id="stepPhotoModal">
            <div class="modal">
            <h2>Add Step Photo URL</h2>
            <div class="form-group">
                <input type="text" id="stepPhotoUrl" placeholder="Paste image URL here...">
            </div>
            <div style="display: flex; gap: 12px">
                <button class="btn-secondary" id="cancelStepPhotoBtn" style="flex: 1">
                Cancel
                </button>
                <button class="btn-primary" id="confirmStepPhotoBtn" style="flex: 1">
                Confirm
                </button>
            </div>
            </div>
        </div>

        <!-- Validation Error Modal -->
        <div class="modal-overlay hidden" id="errorModal">
            <div class="modal">
            <i class="bi bi-x-circle error-icon"></i>
            <h2 id="errorModalTitle">Validation Error</h2>
            <p id="errorModalMessage" style=" text-align: center; color: var(--text-light); margin-bottom: 20px; "></p>
            <button class="btn-primary" id="errorModalBtn" style="width: 100%">
                Got it
            </button>
            </div>
        </div>

        <div class="modal-overlay hidden" id="modal">
            <div class="modal">
                <i class="bi bi-check-circle success-icon"></i>
                <h2>Recipe Uploaded!</h2>
                <button class="btn-confirm" id="confirmBtn">Confirm</button>
            </div>
        </div>
    </div>

    <script src="/pages/js/addRecipe.js"></script>
    <script src="/pages/js/sw-register.js"></script>
    <script src="/pages/js/navBar.js"></script>
</body>
</html>